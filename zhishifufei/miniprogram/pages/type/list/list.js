"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = require("../../../utils/util");
Page({
    data: {
        page: 1,
        tid: 1,
        list: [],
        load: '上拉加载更多',
    },
    onLoad: function (e) {
        this.setData({
            tid: e.tid,
        });
        wx.showLoading({
            title: "加载中",
            mask: true
        }).then();
        this.leibiao(this.data.page);
        wx.hideLoading().then();
    },
    leibiao: function (page) {
        var root = this;
        util_1.post("leibiao", { page: page, tid: root.data.tid }, function (response) {
            if (response.data.length > 0) {
                root.setData({});
            }
            else {
            }
            if (page === 1) {
                root.setData({
                    list: response.data,
                    page: root.data.page + 1,
                    load: response.data.length > 0 ? '上拉加载更多' : '~~·我是有底线的人·~~'
                });
            }
            else {
                root.setData({
                    list: root.data.list.concat(response.data),
                    page: root.data.page + 1,
                    load: response.data.length > 0 ? '上拉加载更多' : '~~·我是有底线的人·~~'
                });
            }
        });
    },
    onReachBottom: function () {
        var root = this;
        root.leibiao(root.data.page);
    },
    openWin: function (e) {
        wx.navigateTo({
            url: "/pages/details/details?tid=" + e.currentTarget.dataset.id + "&title=" + e.currentTarget.dataset.title
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxpc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw0Q0FBeUM7QUFFekMsSUFBSSxDQUFDO0lBQ0QsSUFBSSxFQUFDO1FBQ0QsSUFBSSxFQUFDLENBQUM7UUFDTixHQUFHLEVBQUMsQ0FBQztRQUNMLElBQUksRUFBQyxFQUFFO1FBQ1AsSUFBSSxFQUFDLFFBQVE7S0FDaEI7SUFDRCxNQUFNLEVBQUMsVUFBVSxDQUFLO1FBQ2xCLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDVCxHQUFHLEVBQUMsQ0FBQyxDQUFDLEdBQUc7U0FDWixDQUFDLENBQUE7UUFDRixFQUFFLENBQUMsV0FBVyxDQUFDO1lBQ1gsS0FBSyxFQUFFLEtBQUs7WUFDWixJQUFJLEVBQUUsSUFBSTtTQUNiLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNWLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM3QixFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUNELE9BQU8sRUFBQyxVQUFVLElBQVk7UUFDMUIsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLFdBQUksQ0FBQyxTQUFTLEVBQUMsRUFBQyxJQUFJLE1BQUEsRUFBQyxHQUFHLEVBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUMsRUFBQyxVQUFBLFFBQVE7WUFDNUMsSUFBRyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxDQUFDLEVBQUM7Z0JBQ3RCLElBQUksQ0FBQyxPQUFPLENBQUMsRUFFWixDQUFDLENBQUE7YUFDTDtpQkFBSTthQUVKO1lBQ0QsSUFBRyxJQUFJLEtBQUcsQ0FBQyxFQUFDO2dCQUNSLElBQUksQ0FBQyxPQUFPLENBQUM7b0JBQ1QsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFJO29CQUNuQixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUMsQ0FBQztvQkFDdEIsSUFBSSxFQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBQSxDQUFDLENBQUEsUUFBUSxDQUFBLENBQUMsQ0FBQSxlQUFlO2lCQUN2RCxDQUFDLENBQUM7YUFDTjtpQkFBSTtnQkFDRCxJQUFJLENBQUMsT0FBTyxDQUFDO29CQUNULElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztvQkFDMUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFDLENBQUM7b0JBQ3RCLElBQUksRUFBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBQyxDQUFDLENBQUEsQ0FBQyxDQUFBLFFBQVEsQ0FBQSxDQUFDLENBQUEsZUFBZTtpQkFDdkQsQ0FBQyxDQUFDO2FBQ047UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFDRCxhQUFhLEVBQUU7UUFDWixJQUFNLElBQUksR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFDRCxPQUFPLEVBQUUsVUFBUyxDQUFzRDtRQUNwRSxFQUFFLENBQUMsVUFBVSxDQUFDO1lBQ1YsR0FBRyxFQUFFLDZCQUE2QixHQUFHLENBQUMsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEVBQUUsR0FBRyxTQUFTLEdBQUcsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsS0FBSztTQUM5RyxDQUFDLENBQUM7SUFDUCxDQUFDO0NBRUosQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtwb3N0fSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdXRpbFwiO1xuXG5QYWdlKHtcbiAgICBkYXRhOntcbiAgICAgICAgcGFnZToxLFxuICAgICAgICB0aWQ6MSxcbiAgICAgICAgbGlzdDpbXSxcbiAgICAgICAgbG9hZDon5LiK5ouJ5Yqg6L295pu05aSaJyxcbiAgICB9LFxuICAgIG9uTG9hZDpmdW5jdGlvbiAoZTphbnkpe1xuICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgICAgdGlkOmUudGlkLFxuICAgICAgICB9KVxuICAgICAgICB3eC5zaG93TG9hZGluZyh7XG4gICAgICAgICAgICB0aXRsZTogXCLliqDovb3kuK1cIixcbiAgICAgICAgICAgIG1hc2s6IHRydWVcbiAgICAgICAgfSkudGhlbigpO1xuICAgICAgICB0aGlzLmxlaWJpYW8odGhpcy5kYXRhLnBhZ2UpO1xuICAgICAgICB3eC5oaWRlTG9hZGluZygpLnRoZW4oKTtcbiAgICB9LFxuICAgIGxlaWJpYW86ZnVuY3Rpb24gKHBhZ2U6IG51bWJlcil7XG4gICAgICAgIGNvbnN0IHJvb3QgPSB0aGlzO1xuICAgICAgICBwb3N0KFwibGVpYmlhb1wiLHtwYWdlLHRpZDpyb290LmRhdGEudGlkfSxyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmxlbmd0aD4wKXtcbiAgICAgICAgICAgICAgICByb290LnNldERhdGEoe1xuXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1lbHNle1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihwYWdlPT09MSl7XG4gICAgICAgICAgICAgICAgcm9vdC5zZXREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdDogcmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogcm9vdC5kYXRhLnBhZ2UrMSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZDpyZXNwb25zZS5kYXRhLmxlbmd0aD4wPyfkuIrmi4nliqDovb3mm7TlpJonOid+fsK35oiR5piv5pyJ5bqV57q/55qE5Lq6wrd+fidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHJvb3Quc2V0RGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6IHJvb3QuZGF0YS5saXN0LmNvbmNhdChyZXNwb25zZS5kYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogcm9vdC5kYXRhLnBhZ2UrMSxcbiAgICAgICAgICAgICAgICAgICAgbG9hZDpyZXNwb25zZS5kYXRhLmxlbmd0aD4wPyfkuIrmi4nliqDovb3mm7TlpJonOid+fsK35oiR5piv5pyJ5bqV57q/55qE5Lq6wrd+fidcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBvblJlYWNoQm90dG9tOiBmdW5jdGlvbigpIHtcbiAgICAgICBjb25zdCByb290ID0gdGhpcztcbiAgICAgICByb290LmxlaWJpYW8ocm9vdC5kYXRhLnBhZ2UpO1xuICAgIH0sXG4gICAgb3BlbldpbjogZnVuY3Rpb24oZTp7Y3VycmVudFRhcmdldDp7ZGF0YXNldDp7aWQ6IG51bWJlcix0aXRsZTogc3RyaW5nfX19KSB7XG4gICAgICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgICAgICAgdXJsOiBcIi9wYWdlcy9kZXRhaWxzL2RldGFpbHM/dGlkPVwiICsgZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaWQgKyBcIiZ0aXRsZT1cIiArIGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnRpdGxlXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbn0pXG4iXX0=